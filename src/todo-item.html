<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">

<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<dom-module id="todo-item" >
    <template>
        <style>
            .done{
                background: red;
            }
        </style>
        <div id="undone">
            <paper-checkbox checked="{{tName.editing}}" ></paper-checkbox>
            <input value="{{tName.task}}" readonly$="[[!tName.editing]]">
            <paper-icon-button icon="check" id="check" on-tap="complete"></paper-icon-button>
            <paper-icon-button icon="delete" id="del" on-tap="delete"></paper-icon-button>
        </div><br>
        <div id="done" class="done" ;>
           
        </div>
    </template>

      
    <script>
        class TodoItem extends Polymer.Element{
        static get is(){
          return "todo-item";
        }
        static get properties(){
          return {
              tName:{
                  type: Array,
                  notify: true
              },
              editing:{
                type: Boolean,
                notify: true
              }
            }
          }
          constructor(){
              super();
             
          }
        complete(){
            var u = Polymer.dom(this.root).querySelector('#undone');
            var d = Polymer.dom(this.root).querySelector('#done');
    
            u.addEventListener('tap',function done_task(e){
                if (!e){e=window.event();}
                var el = e.target;
               if(el.id === 'check'){
                    while(u.hasChildNodes()){
                        d.appendChild(u.firstChild);
                    }
                    
               }
                this.removeEventListener('tap',done_task, false);
            },false);


             d.addEventListener('tap',function undone_task(e){
                if (!e){e=window.event();}
                var el = e.target;
               if(el.id === 'check'){
                   while(d.hasChildNodes()){
                       u.appendChild(d.firstChild);
                   }
                    
               }
                this.removeEventListener('tap',undone_task, false);
            },false);
        }
        delete(){
           var x = Polymer.dom(this.root).querySelector('#undone');
           console.log(x);
           x.parentNode.removeChild(x);
        }
        }
        customElements.define(TodoItem.is,TodoItem );
    </script>
</dom-module>